entity.dm_test.list:
  path: '/dm_test/list'
  defaults:
    _entity_list: 'dm_test'
    _title: 'DM Entities'
  requirements:
    _permission: 'view dm_test'

# the canonical link template as seen in the DMTestEntity class annotations
# is crucial for the Views module to integrate a link to the entity
# it MUST be named 'canonical'
entity.dm_test.canonical:
  path: '/dm_test/{dm_test}/view'
  defaults:
  # Calls the view controller, defined in the annotation of the contact entity
    _entity_view: 'dm_test'
    _title: 'DM Entity Content'
  requirements:
  # Calls the access controller of the entity, $operation 'view'
    _entity_access: 'dm_test.view'

entity.dm_test.view:
  path: '/dm_test/{dm_test}/view'
  defaults:
    _entity_view: 'dm_test'
    _title: 'DM Entity Content'
  requirements:
    _entity_access: 'dm_test.view'


entity.dm_test.edit_form:
  path: '/dm_test/{dm_test}/edit'
  defaults:
    _entity_form: 'dm_test'
    _title: 'Edit entity'
  requirements:
    _entity_access: 'dm_test.edit'

entity.dm_test.delete_form:
  path: '/dm_test/{dm_test}/delete'
  defaults:
    _entity_form: 'dm_test.delete'
    _title: 'Delete entity'
  requirements:
    _entity_access: 'dm_test.delete'

entity.dm_test.add:
  path: '/dm_test/{dm_test_bundle}/add'
  defaults:
    _entity_form: 'dm_test'
    _title: 'Add DM Entity'
  requirements:
    _permission: 'administer dm_test entities'

entity.dm_test_bundle.list:
  path: '/admin/structure/dm_test'
  defaults:
    _entity_list: 'dm_test_bundle'
    _title: 'DM Bundles'
  requirements:
    _permission: 'administer dm_test bundles'

entity.dm_test_bundle.add:
  path: '/admin/structure/dm_test/add'
  defaults:
    _entity_form: dm_test_bundle.add
  requirements:
    _permission: 'administer dm_test bundles'

entity.dm_test_bundle.entity_add:
  path: '/admin/structure/dm_test/{dm_test_bundle}/add'
  defaults:
    _controller: 'Drupal\dm_test\Controller\DMEntityController::add'
    _title: 'Add DM Entity'
  options:
    parameters:
      bundle: dm_test_bundle
  requirements:
    _entity_create_access: 'dm_test'

#notice that the route name has to match the one given in the DMTestBundle annotation
#i.e.
#  links = {
#     "edit-form" = "/admin/structure/dm_test/{dm_test_bundle}/edit",
#  }
# maps to this route here
entity.dm_test_bundle.edit_form:
  path: '/admin/structure/dm_test/{dm_test_bundle}/edit'
  defaults:
    _entity_form: dm_test_bundle.edit
    _title: 'Edit Bundle'
  requirements:
    _entity_access: 'dm_test_bundle.edit'

entity.dm_test_bundle.delete_form:
  path: '/admin/structure/dm_test/{dm_test_bundle}/delete'
  defaults:
    _entity_form: dm_test_bundle.delete
    _title: 'Delete Bundle'
  requirements:
    _entity_access: 'dm_test_bundle.delete'

entity.dm_test_bundle.collection:
  path: '/admin/structure/dm_test/{dm_test_bundle}/list'
  defaults:
    _entity_list: dm_test
    _title: 'Entities in Bundle'
  options:
    parameters:
      bundle: dm_test_bundle
  requirements:
    _permission: 'view dm_test'